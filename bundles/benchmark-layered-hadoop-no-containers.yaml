machines:
  '0':
    constraints: 'arch=amd64 testbed=wall1 pubipv4=true'
    series: trusty
  '1':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '2':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '3':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '4':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '5':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '6':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '7':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '8':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '9':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '10':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '11':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '12':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '13':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '14':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '15':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '16':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '17':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
  '18':
    constraints: 'arch=amd64 testbed=wall1'
    series: trusty
services:
  namenode:
    charm: cs:trusty/apache-hadoop-hdfs-master
    num_units: 1
    to: 1
  resourcemanager:
    charm: cs:trusty/apache-hadoop-yarn-master
    num_units: 1
    to: 2
  slave:
    charm: cs:trusty/apache-hadoop-compute-slave
    num_units: 16
    to:
      - 3
      - 4
      - 5
      - 6
      - 7
      - 8
      - 9
      - 10
      - 11
      - 12
      - 13
      - 14
      - 15
      - 16
      - 17
      - 18
  ganglia:
    charm: cs:trusty/ganglia
    num_units: 1
    to: 0
  ganglia-node:
    charm: cs:trusty/ganglia-node
series: trusty
relations:
  - [namenode, slave]
  - [resourcemanager, slave]
  - [resourcemanager, namenode]
  - ["ganglia:node", "ganglia-node:node"]
  - [slave, ganglia-node]
