<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="tengu_get_out_os">
   <payloadFactory media-type="xml">
      <format>
         <ten:tengu xmlns:ten="http://tengu.ibcn.ugent.be/0/1/core"
                    xmlns:lnk="http://www.w3.org/1999/xhtml">
            <ten:platform>
               <ten:id>$1</ten:id>
               <ten:status>$2</ten:status>
               <lnk:link rel="jfed.slice" href="$3"/>
               <lnk:link rel="horizon" method="get" href="https://$3/horizon"/>
            </ten:platform>
         </ten:tengu>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              evaluator="xml"
              expression="get-property('id')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              evaluator="xml"
              expression="get-property('status')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              evaluator="xml"
              expression="get-property('slice')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              xmlns:rspec="http://www.geni.net/resources/rspec/3"
              evaluator="xml"
              expression="$body/rspec:rspec/rspec:node[@client_id='controller']/rspec:host/@name"/>
      </args>
   </payloadFactory>
</sequence>
